---
layout: base.njk
title: Club Store
description: Get exclusive merch, membership, materials, and more!
googleAnalyticsId: { { site.googleAnalyticsId } }
---

<!-- Wrapper -->
<div id="wrapper" class="divided">

  <!-- OnLoad Modal (when the user first lands on the page) -->
  <div class="modal fade onload-modal" tabindex="-1" aria-labelledby="onloadModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <div>
            <h4 class="modal-title" id="onloadModalLabel">Heads up!</h4>
          </div>
        </div>
        <div class="modal-body">
          <p>You can't purchase any items yet. This page is under construction. You can poke around this sneak peek, but please stay tuned while it's being set up.</p>
        </div>
        <div class="modal-footer">
          <button class="btn btn-danger" data-bs-dismiss="modal">Continue anyway</button>
          <a class="btn btn-secondary" href="javascript:history.back()">Go back</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Item Modal -->
  <div class="modal fade" id="itemModal" tabindex="-1" aria-labelledby="itemModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <div>
            <h4 class="modal-title" id="itemModalLabel">Title</h4>
            <p>Short Description</p>
          </div>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" style="box-shadow: none;"></button>
        </div>
        <div class="modal-body">
          <img src="/assets/images/store/beach_1.png" style="width: 100%; aspect-ratio: 1/1; border-radius: 16px; max-width: 500px;">
          <div class="options-list">
            <!-- Options -->
            <div class="mcq">
              <div class="mcq-header">
                <h6>Item Options</h6>
              </div>
              <div class="mcq-options">
                <button class="btn btn-sm btn-secondary">Option A</button>
                <button class="btn btn-sm btn-light">Option B</button>
              </div>
            </div>

            <!-- Description -->
            <p>
              Full item description
            </p>
          </div>
        </div>
        <div class="modal-footer">
          <div style="flex-grow: 1">
            <p>$Price</p>
            <p style="font-size: small; opacity: 50%;">Sales tax already included</p>
          </div>
          <div class="cart-item-actions">
            <button class="btn btn-outline-secondary">–</button>
            <span class="cart-item-quantity">1</span>
            <button class="btn btn-outline-secondary">+</button>
            <button class="btn btn-primary" data-bs-dismiss="modal" data-sku-id="sku_PLACEHOLDER">Place Order</button>
          </div>
        </div>
        <!-- Different footer state for when item is added to cart:
        <div class="modal-footer" style="display: none;">
          <div style="flex-grow: 1">
            <p>$25</p>
            <p style="font-size: small; opacity: 50%;">Sales tax already included</p>
          </div>
          <span class="me-2">Added to cart!</span>
          <button class="btn btn-secondary" data-bs-dismiss="modal">View Cart</button>
        </div>
        -->
      </div>
    </div>
  </div>

  <!-- Cart Modal -->
  <div class="modal fade" id="cartModal" tabindex="-1" aria-labelledby="cartModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <div>
            <h4 class="modal-title" id="cartModalLabel">Your Cart</h4>
            <p>Item Count</p>
          </div>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" style="box-shadow: none;"></button>
        </div>
        <div class="modal-body">
          <div class="cart-item">
            <img src="/assets/images/store/beach_1.png">
            <div class="cart-item-details">
              <div class="cart-item-header">
                <p style="flex-grow: 1">Item Title</p>
                <p>$Price</p>
              </div>
              <p>Item Options</p>
              <div class="cart-item-actions mt-2">
                <button class="btn btn-sm btn-outline-secondary">–</button>
                <span class="cart-item-quantity">1</span>
                <button class="btn btn-sm btn-outline-secondary">+</button>
                <button class="btn btn-sm btn-link" style="color: gray">Delete</button>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <div style="flex-grow: 1">
            <p>Total: $Price</p>
            <p style="font-size: small; opacity: 50%;">Sales tax already included</p>
          </div>
          <button class="btn btn-secondary" data-bs-dismiss="modal">Continue Shopping</button>
          <a class="btn btn-primary" href="/pages/store/store-order-details.html">Checkout</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Store Area -->
  <section class="wrapper style1">
    <div class="inner">
      <div class="store-area">
        <div class="store-header">
          <div class="store-header-text">
            <h2>Club Store</h2>
            <p>Get exclusive merch, membership, materials, and more!</p>
          </div>
          <!-- <button class="button primary" data-bs-toggle="modal" data-bs-target="#cartModal">Cart (0)</button> -->
        </div>
        {% for collection in store.collections %}  
          <div class="store-aisle">
            <div>
              <h4 class="mb-1">{{ collection.title }}</h4>
              <p class="mb-1">{{ collection.description }}</p>
            </div>
            <div class="scrollable-container-x">
              <div 
                {% if collection.isFeatured %}
                  class="store-row store-row-featured"
                {% else %}
                  class="store-row"
                {% endif %}
              >
                <div class="scroll-edge-overlay"></div>
                {% for item in collection.items %}
                  <button class="store-item" data-bs-toggle="modal" data-bs-target="#itemModal" data-sku-id={{ item.skuId }}>
                    <img src={{ item.image }}>
                    <p>
                      <b>{{ item.name }}</b>
                      {% if item.shortDesc %}
                        <br>
                        {{ item.shortDesc }}
                      {% endif %}
                    </p>
                  </button>
                {% endfor %}
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
  </section>

</div>

<!-- Stripe Code -->
<script src="https://js.stripe.com/v3/"></script>
<script>
  // Replace with your own publishable key: https://dashboard.stripe.com/test/apikeys
  var PUBLISHABLE_KEY = "pk_test_Tr8olTkdFnnJVywwhNPHwnHK00HkHV4tnP";
  // Replace with the domain you want your users to be redirected back to after payment
  var DOMAIN = location.href.replace(/[^/]*$/, "");

  var stripe = Stripe(PUBLISHABLE_KEY);

  // Handle any errors from Checkout
  var handleResult = function(result) {
    if (result.error) {
      var displayError = document.getElementById("error-message");
      displayError.textContent = result.error.message;
    }
  };

  document.querySelectorAll("button").forEach(function(button) {
    button.addEventListener("click", function(e) {
      var skuId = e.target.dataset.skuId;
      var planId = e.target.dataset.planId;
      var items = skuId
        ? [{ sku: skuId, quantity: 1 }]
        : [{ plan: planId, quantity: 1 }];

      // Make the call to Stripe.js to redirect to the checkout page
      // with the sku or plan ID.
      stripe
        .redirectToCheckout({
          items: items,
          successUrl:
            DOMAIN + "success.html?session_id={CHECKOUT_SESSION_ID}",
          cancelUrl:
            DOMAIN + "canceled.html?session_id={CHECKOUT_SESSION_ID}"
        })
        .then(handleResult);
    });
  });
</script>